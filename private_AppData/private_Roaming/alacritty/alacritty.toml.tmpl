{{- if and (eq .chezmoi.os "windows") (.machineConfig.features.desktop) -}}
[window]
opacity = 0.97
blur = true

[general]
import = [
    "{{ .chezmoi.homeDir }}/.config/alacritty/themes/themes/ayu_light.toml"
]
# Use GLES renderer for better compatibility with software rendering (Dev Box, VMs)
# ANGLE translates OpenGL to DirectX, avoiding native OpenGL driver issues
renderer = "gles"

# Windows-specific: Launch WSL NixOS with interactive login shell
[terminal.shell]
program = "wsl.exe"
args = ["-d", "NixOS", "--", "zsh", "-l", "-i"]

# Instead of using: `alacritty --print-events`
# https://github.com/alacritty/alacritty/wiki/Keyboard-mappings#how-to-create-a-mapping
# Open a terminal without Tmux, and get the key you want with the command:
#
# ```sh
# nix-shell -p unixtools.xxd
# xxd -psd
# ```

# https://github.com/jackMort/ChatGPT.nvim/issues/99#issuecomment-1492668722
# https://stackoverflow.com/a/42461580/609025
[[keyboard.bindings]]
chars = "\u001B[13;2u"
key = "Return"
mods = "Shift"

[[keyboard.bindings]]
chars = "\u001B[13;5u"
key = "Return"
mods = "Control"
{{- end -}}
