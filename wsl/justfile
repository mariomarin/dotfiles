# WSL NixOS Setup and Management
# This justfile helps Windows users set up and manage NixOS on WSL2

# Set shell to PowerShell on Windows
set shell := ["powershell.exe", "-NoLogo", "-Command"]

# Default: show help
default:
    @nu wsl.nu help

# Check if WSL2 is installed
check-wsl:
    nu wsl.nu check-wsl

# Install WSL2 (requires Administrator privileges)
install-wsl:
    nu wsl.nu install-wsl

# Import NixOS into WSL (requires nixos.wsl from chezmoi apply)
import-nixos:
    nu wsl.nu import-nixos

# Start NixOS WSL instance
start-nixos:
    nu wsl.nu start-nixos

# List installed WSL distributions
list-distros:
    nu wsl.nu list-distros

# Set NixOS as default WSL distribution
set-default:
    nu wsl.nu set-default

# Stop NixOS WSL instance
stop-nixos:
    nu wsl.nu stop-nixos

# Unregister/remove NixOS from WSL
uninstall-nixos:
    nu wsl.nu uninstall-nixos

# Run a command in NixOS WSL
run COMMAND:
    nu wsl.nu run {{COMMAND}}

# Open NixOS WSL in Windows Terminal
terminal:
    nu wsl.nu terminal

# Show WSL system information
info:
    nu wsl.nu info

# Health check for WSL setup
health:
    nu wsl.nu health

# Complete WSL NixOS setup (one-command install)
setup:
    nu wsl.nu setup
