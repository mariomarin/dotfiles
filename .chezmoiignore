.git
*.zwc*
*.old*
tmux/plugins
zim/modules
vimfiles
Session.vim
.config/systemd/user/syncthing.service

# Personal notes (not applied to home)
etc-personal
etc-personal/**

# Development and repository files (not dotfiles)
nix
nix/**
nixos
nixos/**
shell.nix
devenv.nix
chezmoi
chezmoi/**
Makefile
README.md
CLAUDE.md
**/*CLAUDE.md
.devenv
.devenv/**
.direnv
.direnv/**
.editorconfig
devenv.lock
devenv.yaml
.claude
.claude/**

# OS-specific scripts (ignore scripts for other operating systems)
{{ if ne .chezmoi.os "darwin" }}
.chezmoiscripts/darwin-*
{{ end }}

{{ if ne .chezmoi.os "windows" }}
.chezmoiscripts/windows-*
{{ end }}

{{ if ne .chezmoi.os "linux" }}
.chezmoiscripts/linux-*
{{ end }}

# Unix-only configurations (ignore on Windows)
{{ if eq .chezmoi.os "windows" }}
.config/zim
.config/zim/**
.config/tmux
.config/tmux/**
.config/zsh
.config/zsh/**
.config/tridactyl
.config/tridactyl/**
.config/autorandr
.config/autorandr/**
.config/leftwm
.config/leftwm/**
.config/picom
.config/picom/**
.config/polybar
.config/polybar/**
.config/rofi
.config/rofi/**
.config/systemd
.config/systemd/**
.config/mimeapps.list
{{ end }}

# macOS-only configurations (ignore on non-macOS)
{{ if ne .chezmoi.os "darwin" }}
nix/darwin
nix/darwin/**
.config/aerospace
.config/aerospace/**
{{ end }}

# Linux-only window managers (ignore on macOS)
{{ if eq .chezmoi.os "darwin" }}
.config/leftwm
.config/leftwm/**
.config/picom
.config/picom/**
.config/polybar
.config/polybar/**
.config/rofi
.config/rofi/**
.config/autorandr
.config/autorandr/**
{{ end }}

# Desktop-specific scripts (ignore on headless/server machines)
{{ if not .machineConfig.features.desktop }}
.chezmoiscripts/linux-30-*
.chezmoiscripts/linux-40-*
.chezmoiscripts/linux-50-*
.chezmoiscripts/linux-autostart-*
{{ end }}

# Platform variable for chef-managed hosts
{{ $platform := "" }}
{{ if hasKey .machineConfig "platform" }}{{ $platform = .machineConfig.platform }}{{ end }}

# Simple hosts (no Nix): SSH handled externally, no Bitwarden access
{{ if or (eq $platform "darwin-brew") (eq $platform "linux-apt") }}
.ssh
.ssh/**
{{ end }}

# Kube config symlink only for WSL (symlinks to Windows host config)
{{ if not (and (eq .chezmoi.os "linux") (env "WSL_DISTRO_NAME")) }}
.kube/config
{{ end }}

# linux-apt platform only (apt packages)
{{ if ne $platform "linux-apt" }}
.config/apt
.config/apt/**
.chezmoiscripts/run_after_linux-apt-install-packages.nu
{{ end }}

# darwin-brew platform only (Homebrew packages and services)
{{ if ne $platform "darwin-brew" }}
.config/brew
.config/brew/**
.config/launchd
.config/launchd/**
.chezmoiscripts/run_onchange_after_10_darwin-brew-install-packages.nu
.chezmoiscripts/run_onchange_after_20_darwin-brew-setup-services.nu
{{ end }}

# darwin with nix only (tridactyl-native from nix)
{{ if eq $platform "darwin-brew" }}
.chezmoiscripts/run_onchange_darwin-setup-tridactyl-native.nu
{{ end }}

# User-managed directory contents (keep directory structure, ignore contents)
.config/autostart/**
!.config/autostart/.keep
!.config/autostart/kanata-tray.desktop

# Kanata tray autostart (only on Linux desktops with kanata)
{{ if not (and (eq .chezmoi.os "linux") .machineConfig.features.desktop .machineConfig.features.kanata) }}
.config/autostart/kanata-tray.desktop
{{ end }}
.local/share/applications/**
!.local/share/applications/.keep
Pictures/Wallpapers/**
!Pictures/Wallpapers/.keep
