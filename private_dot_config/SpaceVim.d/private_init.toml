# All SpaceVim option below [option] section
[options]
  # set spacevim theme. by default colorscheme layer is not loaded,
  # if you want to use more colorscheme, please load the colorscheme
  # layer
  colorscheme = "ayu"
  colorscheme_bg = "light"
  ayucolor="light"

  # Disable guicolors in basic mode, many terminal do not support 24bit
  # true colors
  enable_guicolors = true

  # disable statusline separator, if you want to use other value, please
  # install nerd fonts
  statusline_separator = "arrow"
  statusline_inactive_separator = "arrow"
  buffer_index_type = 4
  enable_tabline_filetype_icon = true
  enable_statusline_mode = false

  # change things before SpaceVim takes over
  bootstrap_before = "myspacevim#before"
  botstrap_after = 'myspacevim#after'

  # session management
  startify_session_persistence = true
  startify_session_autoload = true

  lint_engine = "ale"
  snippet_engine = "ultisnips"
  filemanager = "neo-tree"


[[layers]]
  name = 'autocomplete'
  auto-completion-return-key-behavior = "complete"
  auto-completion-tab-key-behavior = "smart"

[[layers]]
  name = "VersionControl"

[[layers]]
  name = "checkers"

[[layers]]
  name = "colorscheme"

[[layers]]
  name = "core#statusline"

[[layers]]
  name = "core#tabline"

[[layers]]
  name = "core"

[[layers]]
  name = "debug"

[[layers]]
  name = "default"

[[layers]]
  name = "edit"

[[layers]]
  name = "format"

[[layers]]
  name = "telescope"

[[layers]]
  name = "lang#vim"

[[layers]]
  name = "git"
  git-plugin = "fugitive"

[[layers]]
  name = "github"

[[layers]]
  name = "lang#dockerfile"

[[layers]]
  name = "lang#go"

[[layers]]
  name = "lang#html"

[[layers]]
  name = "lang#javascript"

[[layers]]
  name = "lang#python"

[[layers]]
  name = "lang#plantuml"

[[layers]]
  name = "lang#rust"

[[layers]]
  name = "lang#toml"

[[layers]]
  name = "lsp"

  # https://github.com/SpaceVim/SpaceVim/blob/v2.1.0/autoload/SpaceVim/lsp.vim
  # https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md
  # https://github.com/SpaceVim/SpaceVim/blob/v2.1.0/bundle/nvim-lspconfig/doc/server_configurations.md
  # https://github.com/SpaceVim/SpaceVim/tree/v2.1.0/bundle/nvim-lspconfig/lua/lspconfig/server_configurations
  enabled_clients = [
#    'gopls',
    'pyright',
#    'rust_analyzer',
    'terraformls',
    'tsserver',
    'yamlls'
  ]

  filetypes = [
    # "go",
    # "rust",
    # "javascript",
    "typescript",
  ]

  [layers.override_client_cmds]
#    gopls = ['gopls', 'serve']
    pyright = ['pyright-langserver', '--stdio']
#    rust_analyzer = ["rust-analyzer"]
    terraformls = ["terraform-ls", "serve"]
    tsserver = [
      # https://github.com/NixOS/nixpkgs/issues/210051#issuecomment-1378040732
      'typescript-language-server',
      '--stdio',
      '--tsserver-path',
      '/nix/store/4yzj5v1r3fkix9a6gc5jb49fhzyrmznk-typescript-4.8.4/lib/node_modules/typescript/lib/'
    ]
    yamlls = ['yaml-language-server', '--stdio']

[[layers]]
  name = "sudo"

[[layers]]
  name = "tags"

[[layers]]
  name = "tools"

[[layers]]
  name = "treesitter"

[[layers]]
  name = "ui"

[[layers]]
  name = "tmux"
  tmux_navigator_modifier = "alt"

# ayu color scheme https://github.com/ayu-theme/ayu-vim
[[custom_plugins]]
  repo = "ayu-theme/ayu-vim"
  merged = false

[[custom_plugins]]
  name = "benjie/local-npm-bin.vim"
  merged = false

[[custom_plugins]]
  name = "vigoux/LanguageTool.nvim"
  merged = false

[[custom_plugins]]
  name = "nvim-orgmode/orgmode"
  # avoid hook_source https://github.com/nvim-orgmode/orgmode#installation
  # Global mappings are not set because plugin is not initialized on startup
  # setup. Besides, it has a startup time of somewhere between 1 and 3 ms, so
  # there are not many benefits in lazy loading
  merged = false

# Chezmoi
[[custom_plugins]]
  name = "Lilja/vim-chezmoi"
  merged = false

[[custom_plugins]]
  name = "alker0/chezmoi.vim"
  merged = false

[[custom_plugins]]
  name = "hashivim/vim-terraform"
  hook_source = "let g:terraform_fmt_on_save = 1"
  merged = false

# ChatGPT
[[custom_plugins]]
  name = "jackMort/ChatGPT.nvim"
  hook_source = '''
lua <<EOF
require('chatgpt').setup({
  openai_params = { model = 'gpt-4', },
  popup_input = { submit = '<C-e>', },
})
EOF
'''
  merged = false

[[custom_plugins]]
  name =  "folke/trouble.nvim"
  merged = false
