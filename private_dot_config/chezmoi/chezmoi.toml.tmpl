sourceDir = "~/.local/share/chezmoi"

{{- if eq .chezmoi.os "windows" }}
[cd]
command = "pwsh"
{{- end }}

[hooks.read-source-state.pre]
{{- if eq .chezmoi.os "windows" }}
    command = "pwsh"
    args = ["-ExecutionPolicy", "Bypass", "-File", "{{ .chezmoi.sourceDir }}/.install/bootstrap-windows.ps1"]
{{- else }}
    command = "{{ .chezmoi.sourceDir }}/.install/bootstrap-unix.sh"
{{- end}}

[diff]
command = "delta"
args = ["--syntax-theme", "Dracula", "--line-numbers"]
exclude = ["scripts"]

[status]
exclude = ["scripts"]

[merge]
command = "nvim -d"

[git]
# Disabled because we use claude_chain in run_before script
autoCommit = false
autoPush = false

[data]
    machineType = {{ .machineType | quote }}
    codespaces = {{ .codespaces }}
    
    [data.machineConfig]
        hostname = {{ .machineConfig.hostname | quote }}
        type = {{ .machineConfig.type | quote }}
        
        [data.machineConfig.features]
            desktop = {{ .machineConfig.features.desktop }}
            kmonad = {{ .machineConfig.features.kmonad }}
            audio = {{ .machineConfig.features.audio }}
            bluetooth = {{ .machineConfig.features.bluetooth }}
