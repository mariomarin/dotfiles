# Topgrade configuration
# Updates all system packages and plugins in one command

[misc]
# Don't update these - handled separately or not needed
disable = [
    "system",         # System update (NixOS uses flakes, not channels)
    "containers",     # Docker/Podman containers
    "firmware",       # Firmware updates (handle manually)
    "restarts",       # Don't auto-restart services
    "vscode",         # VSCode extensions (using Neovim instead)
    "poetry",         # Poetry packages (not using)
    "yarn",           # Yarn global packages (using pnpm instead)
]

# Don't retry failed steps automatically
no_retry = false

# Run inside tmux if available
run_in_tmux = false

# Assume yes for all prompts
assume_yes = false

# Cleanup after updates
cleanup = true

# Custom commands to run at specific times
[pre_commands]
# Commands to run before updates

[commands]
# Update tmux plugins via TPM
"Tmux Plugins" = "~/.local/share/tmux/plugins/tpm/bin/update_plugins all"
# Update NixOS with flakes
"NixOS Flake" = "cd $(chezmoi source-path) && make nixos/switch"

[post_commands]
# Add updated lock files to chezmoi after updates
"Add lock files to chezmoi" = "chezmoi add ~/.config/nvim/lazy-lock.json 2>/dev/null || true"

[git]
# Pull git repositories
pull_predefined = false

# Arguments for git pull
arguments = "--rebase --autostash"

[linux]
# NixOS configuration
nix_arguments = "--flake"
nix_env_arguments = "--prebuilt-only"

# Update package managers
apt_arguments = "--only-upgrade"
dnf_arguments = "--refresh"

[vim]
# Force update vim plugins
force_plug_update = false

[npm]
# NPM configuration
# Note: use_pnpm was removed in newer versions, pnpm is auto-detected

[python]
# Enable pip updates
enable_pip_review = true
enable_pip_review_local = false
enable_pipupgrade = false

# [tmux] section has been removed as it's not a valid topgrade section
# Tmux plugin updates are now handled differently in newer topgrade versions

[distrobox]
# Update distrobox containers
use_root = false

