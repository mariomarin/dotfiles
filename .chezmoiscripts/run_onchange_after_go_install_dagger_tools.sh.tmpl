#!/usr/bin/env bash
# Install container-use from source
# This script runs when the containerUse version in .chezmoidata.toml changes

set -euo pipefail

CONTAINER_USE_VERSION="{{ .versions.containerUse }}"

echo "Installing container-use@${CONTAINER_USE_VERSION} from source..."

# Use go install to build and install the binary
go install "github.com/dagger/container-use/cmd/container-use@${CONTAINER_USE_VERSION}"

echo "container-use installed successfully"
container-use version || true
