#!/usr/bin/env nu
# Install Homebrew packages from Brewfile
# hash: {{ include "private_dot_config/brew/Brewfile.tmpl" | sha256sum }}

let brewfile = $"($env.HOME)/.config/brew/Brewfile"

if not ($brewfile | path exists) {
    exit 0
}

# Install Homebrew if not present
if (which brew | is-empty) {
    print "Installing Homebrew..."
    bash -c '/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"'
}

print "Installing Homebrew packages..."
brew bundle --file $brewfile --no-lock
