#!/usr/bin/env nu
# Setup LeftWM theme and enable services
# Only runs on Linux desktop machines

{{- if and (eq .chezmoi.os "linux") .machineConfig.features.desktop }}

print "Setting up LeftWM custom theme..."

# Create symlink to custom theme
if ("~/.config/leftwm/themes/current" | path expand | path exists) {
    rm ~/.config/leftwm/themes/current
}
ln -s ~/.config/leftwm/themes/custom ~/.config/leftwm/themes/current

# Reload systemd user daemon to pick up new units
systemctl --user daemon-reload

# Enable (but don't start) the services
systemctl --user enable picom.service
systemctl --user enable polybar.service

print "âœ“ LeftWM theme and services configured"

{{- end }}
