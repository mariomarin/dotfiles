#!/usr/bin/env bash
# Enable wallpaper rotation timer on desktop machines

set -euo pipefail

{{- if .machineConfig.features.desktop }}
echo "Enabling wallpaper rotation timer..."

# Reload systemd user daemon to pick up new units
systemctl --user daemon-reload

# Enable and start the timer
systemctl --user enable wallpaper-rotation.timer
systemctl --user start wallpaper-rotation.timer

echo "âœ“ Wallpaper rotation timer enabled (changes every 30 minutes)"
echo "  - Timer status: systemctl --user status wallpaper-rotation.timer"
echo "  - Manual rotation: systemctl --user start wallpaper-rotation.service"
{{- else }}
echo "Skipping wallpaper timer setup on non-desktop machine"
{{- end }}