#!/usr/bin/env bash
# This script manages the claude settings.json file
# It preserves the dynamic feedbackSurveyState.lastShownTime value

# Read the current timestamp from the target file if it exists
CURRENT_TIME=0
if [ -f "$HOME/.claude/settings.json" ]; then
    CURRENT_TIME=$(jq -r '.feedbackSurveyState.lastShownTime // 0' "$HOME/.claude/settings.json" 2>/dev/null || echo 0)
fi

# Output the settings with preserved timestamp
cat <<EOF
{
  "\$schema": "https://json.schemastore.org/claude-code-settings.json",
  "feedbackSurveyState": {
    "lastShownTime": $CURRENT_TIME
  },
  "includeCoAuthoredBy": false
}
EOF